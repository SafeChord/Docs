# 核心服務開發流程

本流程針對 SafeChord 專案中「核心服務」（如 simulator, ingestor, analytics API, dashboard 等）的開發，強調可測試性、模組化與容器化，確保主資料流可端到端驗證。

## 步驟總覽

1. **根據需求資料流拆解功能**
    - 釐清事件 → 資料 → 查詢 → 呈現等主流程

2. **建立開發用 Dockerfile**
    - 每個服務皆以 container-first 開發，方便本地或 CI 環境複製

3. **先寫服務整合測試，再拆解為單元測試**
    - 從服務間串接（integration）優先，逐步細化至功能級（unit）

4. **單元測試導向開發邏輯**
    - 優先讓測試通過，再完善業務實作，提升可維護性

5. **自動化測試腳本設計**
    - 從建置、啟動 test image 到通過所有測試步驟

6. **針對部屬需求優化 Dockerfile**
    - 建議用 multi-stage build，測試與 production image 區隔

7. **撰寫服務整合測試規劃**
    - 定義各服務 contract，確保資料流與 API schema 無誤

8. **使用 docker-compose 拼裝多服務進行全鏈整合測試**
    - 模擬 production 串接環境，提升驗證效力

9. **整合測試通過後進入後續部屬流程**

# 輔助程式開發流程

針對 CLI 工具、time server 等輔助型模組，流程強調快速交付、功能驅動，並保留未來重構與自動化測試擴充空間。

## 步驟總覽

1. **開發過程中動態發現/補齊需求**
    - 先解決實際痛點，視需求彈性增減功能

2. **撰寫開發用 Dockerfile**
    - 工具亦以 container 方式封裝，方便本地、CI 或 K8s 調用

3. **專注功能實現，優先驗證主流程可用**
    - 單元/整合測試可視時間補齊，建議至少 basic test case

4. **根據實際使用優化 Dockerfile**
    - 確保啟動效率與跨平台一致性

5. **以 docker-compose 或手動方式與主服務拼裝測試**
    - 驗證輔助程式與主流程間的實際交互

6. **可補簡易說明文件，記錄啟動與參數範例**

# 部屬與驗證流程

本流程定義 SafeChord 專案的分階段部署、接口驗證、初始化與設定檢查機制，確保每個服務按依賴順序正確啟動與驗證。

## 步驟總覽

1. **設計跨服務接口測試規劃**
    - 以「service-to-service」合約與資料流為驗證主軸，超越單元測試

2. **根據服務依賴性拆解多階段 (phase) 部屬**
    - 先部署基礎設施（DB、後端 API），再啟動依賴下游服務

3. **第一階段定義接口/合約**
    - 明確記錄 API 端點、schema、存取方式等，減少串接踩雷

4. **逐步部屬核心服務**
    - 各階段部署完成後即時驗證通聯，必要時執行初始化 script

5. **完成主流程後，部署低耦合模組（如 UI）**
    - 依賴少的服務可獨立驗證、後期接入

6. **總體設定、密鑰、環境變數測試規劃**
    - 檢查所有 config/secret 配置是否正確，避免人為遺漏

7. **通過全部階段驗證後完成部屬收尾**
